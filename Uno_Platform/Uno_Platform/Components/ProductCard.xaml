<UserControl x:Class="Uno_Platform.Components.ProductCard"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="using:Uno_Platform.Models"
             xmlns:converters="using:Uno_Platform.Converters">
  
  <UserControl.Resources>
    <!-- Card Tap Animation -->
    <Storyboard x:Key="TapAnimation">
      <DoubleAnimation Storyboard.TargetName="CardScale"
                      Storyboard.TargetProperty="ScaleX"
                      To="0.97"
                      Duration="0:0:0.1">
        <DoubleAnimation.EasingFunction>
          <CubicEase EasingMode="EaseInOut"/>
        </DoubleAnimation.EasingFunction>
      </DoubleAnimation>
      <DoubleAnimation Storyboard.TargetName="CardScale"
                      Storyboard.TargetProperty="ScaleY"
                      To="0.97"
                      Duration="0:0:0.1">
        <DoubleAnimation.EasingFunction>
          <CubicEase EasingMode="EaseInOut"/>
        </DoubleAnimation.EasingFunction>
      </DoubleAnimation>
      <DoubleAnimation Storyboard.TargetName="CardScale"
                      Storyboard.TargetProperty="ScaleX"
                      To="1.0"
                      BeginTime="0:0:0.1"
                      Duration="0:0:0.2">
        <DoubleAnimation.EasingFunction>
          <CubicEase EasingMode="EaseOut"/>
        </DoubleAnimation.EasingFunction>
      </DoubleAnimation>
      <DoubleAnimation Storyboard.TargetName="CardScale"
                      Storyboard.TargetProperty="ScaleY"
                      To="1.0"
                      BeginTime="0:0:0.1"
                      Duration="0:0:0.2">
        <DoubleAnimation.EasingFunction>
          <CubicEase EasingMode="EaseOut"/>
        </DoubleAnimation.EasingFunction>
      </DoubleAnimation>
    </Storyboard>

    <!-- Hover Animation -->
    <Storyboard x:Name="HoverAnimation">
      <DoubleAnimation Storyboard.TargetName="CardScale"
                      Storyboard.TargetProperty="ScaleX"
                      To="1.05"
                      Duration="0:0:0.3">
        <DoubleAnimation.EasingFunction>
          <CubicEase EasingMode="EaseOut"/>
        </DoubleAnimation.EasingFunction>
      </DoubleAnimation>
      <DoubleAnimation Storyboard.TargetName="CardScale"
                      Storyboard.TargetProperty="ScaleY"
                      To="1.05"
                      Duration="0:0:0.3">
        <DoubleAnimation.EasingFunction>
          <CubicEase EasingMode="EaseOut"/>
        </DoubleAnimation.EasingFunction>
      </DoubleAnimation>
      <DoubleAnimation Storyboard.TargetName="CardShadow"
                      Storyboard.TargetProperty="Opacity"
                      To="1"
                      Duration="0:0:0.3"/>
      <DoubleAnimation Storyboard.TargetName="CardBorder"
                      Storyboard.TargetProperty="Opacity"
                      To="1"
                      Duration="0:0:0.3"/>
    </Storyboard>

    <!-- Leave Animation -->
    <Storyboard x:Name="LeaveAnimation">
      <DoubleAnimation Storyboard.TargetName="CardScale"
                      Storyboard.TargetProperty="ScaleX"
                      To="1.0"
                      Duration="0:0:0.3">
        <DoubleAnimation.EasingFunction>
          <CubicEase EasingMode="EaseIn"/>
        </DoubleAnimation.EasingFunction>
      </DoubleAnimation>
      <DoubleAnimation Storyboard.TargetName="CardScale"
                      Storyboard.TargetProperty="ScaleY"
                      To="1.0"
                      Duration="0:0:0.3">
        <DoubleAnimation.EasingFunction>
          <CubicEase EasingMode="EaseIn"/>
        </DoubleAnimation.EasingFunction>
      </DoubleAnimation>
      <DoubleAnimation Storyboard.TargetName="CardShadow"
                      Storyboard.TargetProperty="Opacity"
                      To="0.5"
                      Duration="0:0:0.3"/>
      <DoubleAnimation Storyboard.TargetName="CardBorder"
                      Storyboard.TargetProperty="Opacity"
                      To="0.8"
                      Duration="0:0:0.3"/>
    </Storyboard>
  </UserControl.Resources>

  <!-- Card Container with Shadow and Gradient -->
  <Grid Margin="4">
    <!-- Shadow Effect -->
    <Border x:Name="CardShadow"
           Background="#30000000"
           CornerRadius="{StaticResource BorderRadiusLarge}"
           Opacity="0.5"
           Margin="0,4,0,0"/>
    
    <!-- Main Card Border with Gradient Background -->
  <Border x:Name="CardBorder"
           Background="{StaticResource CardGradientBrush}"
           Padding="0"
           CornerRadius="{StaticResource BorderRadiusLarge}"
           BorderThickness="2"
           BorderBrush="{StaticResource BorderBrush}"
           Opacity="0.8"
          PointerEntered="Border_PointerEntered"
          PointerExited="Border_PointerExited"
           Tapped="Card_Tapped">
    <Border.RenderTransform>
        <ScaleTransform x:Name="CardScale" CenterX="0.5" CenterY="0.5"/>
    </Border.RenderTransform>
      
    <Grid>
      <Grid.RowDefinitions>
          <RowDefinition Height="200"/>
        <RowDefinition Height="220"/>
      </Grid.RowDefinitions>

        <!-- Product Image Section with Gradient Background -->
      <Border Grid.Row="0"
               Background="{StaticResource PrimaryGradientBrush}"
               CornerRadius="16,16,0,0"
               Padding="{StaticResource SpacingL}">
        <Grid>
            <!-- Product Image -->
          <Image Source="Assets/img/caby.png"
                 Stretch="Uniform"
                 HorizontalAlignment="Center"
                 VerticalAlignment="Center"
                  MaxHeight="200"
                  MaxWidth="200"
                  Opacity="0.95"/>
            
          <!-- Category Badge Overlay -->
            <Border Background="{StaticResource SecondaryBrush}"
                   CornerRadius="16"
                   Padding="12,6"
                  HorizontalAlignment="Right"
                  VerticalAlignment="Top"
                   Margin="{StaticResource SpacingS}"
                  Opacity="0.95">
            <TextBlock Text="{x:Bind Product.Category, Mode=OneWay}"
                      Foreground="White"
                        FontSize="12"
                        FontWeight="Bold"/>
          </Border>
        </Grid>
      </Border>

        <!-- Product Info Section -->
        <Border Grid.Row="1"
               Background="{StaticResource SurfaceBrush}"
               CornerRadius="0,0,16,16"
               Padding="16">
          <Grid RowDefinitions="Auto,Auto,*">
            
        <!-- Product Name -->
        <TextBlock Grid.Row="0"
                   Text="{x:Bind Product.Name, Mode=OneWay}"
                   TextWrapping="Wrap"
                   MaxLines="2"
                   TextTrimming="CharacterEllipsis"
                   FontSize="18"
                   FontWeight="Bold"
                   LineHeight="24"
                   Foreground="{StaticResource TextPrimaryBrush}"
                   Margin="0,0,0,8"/>

        <!-- Price -->
        <StackPanel Grid.Row="1"
                    Orientation="Horizontal" 
                    Spacing="8"
                    Margin="0,0,0,12">
              <Border Background="{StaticResource AccentBrush}"
                     CornerRadius="8"
                     Padding="8,5"
                     HorizontalAlignment="Left">
                <StackPanel Orientation="Horizontal" Spacing="5">
                  <TextBlock Text="ðŸ’°"
                            FontSize="16"
                            VerticalAlignment="Center"/>
                  <TextBlock Text="{x:Bind Product.Price, Mode=OneWay, Converter={StaticResource PriceFormatConverter}}"
                             Foreground="White"
                             FontSize="18"
                             FontWeight="Bold"/>
                </StackPanel>
              </Border>
        </StackPanel>

        <!-- Action Buttons -->
        <Grid Grid.Row="2"
              ColumnDefinitions="*,*" 
              ColumnSpacing="8" 
              VerticalAlignment="Bottom"
              Margin="0,0,0,0">
              
              <!-- View Details Button -->
          <Button Grid.Column="0"
                  Content="Details"
                  Style="{StaticResource OutlinedButtonStyle}"
                  Command="{x:Bind ViewDetailsCommand}"
                  CommandParameter="{x:Bind Product, Mode=OneWay}"/>
              
              <!-- Add to Cart Button -->
          <Button Grid.Column="1"
                  Content="Add Cart"
                  Style="{StaticResource PrimaryButtonStyle}"
                  Command="{x:Bind AddToCartCommand}"
                  CommandParameter="{x:Bind Product, Mode=OneWay}"/>
        </Grid>

          </Grid>
        </Border>
    </Grid>
  </Border>
  </Grid>
</UserControl>
