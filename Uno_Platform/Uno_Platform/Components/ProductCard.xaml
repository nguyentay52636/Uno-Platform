<UserControl x:Class="Uno_Platform.Components.ProductCard"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="using:Uno_Platform.Models"
             xmlns:converters="using:Uno_Platform.Converters">
  
  <UserControl.Resources>
    <!-- Simplified Hover Animation - Only opacity changes -->
    <Storyboard x:Name="HoverAnimation">
      <DoubleAnimation Storyboard.TargetName="CardBorder"
                      Storyboard.TargetProperty="Opacity"
                      To="1"
                      Duration="0:0:0.15"/>
    </Storyboard>

    <!-- Leave Animation -->
    <Storyboard x:Name="LeaveAnimation">
      <DoubleAnimation Storyboard.TargetName="CardBorder"
                      Storyboard.TargetProperty="Opacity"
                      To="0.95"
                      Duration="0:0:0.15"/>
    </Storyboard>
  </UserControl.Resources>

  <!-- Card Container with Shadow and Gradient -->
  <Grid Margin="2">
    <!-- Shadow Effect -->
    <Border x:Name="CardShadow"
           Background="#20000000"
           CornerRadius="10"
           Opacity="0.4"
           Margin="0,2,0,0"/>
    
    <!-- Main Card Border with Gradient Background -->
  <Border x:Name="CardBorder"
           Background="{StaticResource CardGradientBrush}"
           Padding="0"
           CornerRadius="10"
           BorderThickness="1"
           BorderBrush="{StaticResource BorderBrush}"
           Opacity="0.95"
          PointerEntered="Border_PointerEntered"
          PointerExited="Border_PointerExited"
           Tapped="Card_Tapped">
      
    <Grid>
      <Grid.RowDefinitions>
          <RowDefinition Height="140"/>
        <RowDefinition Height="*"/>
      </Grid.RowDefinitions>

        <!-- Product Image Section with Gradient Background -->
      <Border Grid.Row="0"
               Background="{StaticResource PrimaryGradientBrush}"
               CornerRadius="10,10,0,0"
               Padding="8">
        <Grid>
            <!-- Product Image -->
          <Image Source="Assets/img/caby.png"
                 Stretch="Uniform"
                 HorizontalAlignment="Center"
                 VerticalAlignment="Center"
                  MaxHeight="120"
                  MaxWidth="120"
                  Opacity="0.95"/>
            
          <!-- Category Badge Overlay -->
            <Border Background="#4A7C7D"
                   CornerRadius="10"
                   Padding="8,4"
                  HorizontalAlignment="Right"
                  VerticalAlignment="Top"
                   Margin="4">
            <TextBlock Text="{x:Bind Product.Category, Mode=OneWay}"
                      Foreground="White"
                        FontSize="10"
                        FontWeight="Bold"/>
          </Border>
        </Grid>
      </Border>

        <!-- Product Info Section -->
        <Border Grid.Row="1"
               Background="{StaticResource SurfaceBrush}"
               CornerRadius="0,0,10,10"
               Padding="8">
          <Grid RowDefinitions="Auto,Auto,*">
            
        <!-- Product Name -->
        <TextBlock Grid.Row="0"
                   Text="{x:Bind Product.Name, Mode=OneWay}"
                   TextWrapping="Wrap"
                   MaxLines="2"
                   TextTrimming="CharacterEllipsis"
                   FontSize="13"
                   FontWeight="Bold"
                   LineHeight="18"
                   Foreground="#3D5A5B"
                   Margin="0,0,0,4"/>

        <!-- Price -->
        <Border Grid.Row="1"
                Background="#3D5A5B"
                CornerRadius="6"
                Padding="6,4"
                HorizontalAlignment="Left"
                Margin="0,0,0,8">
          <TextBlock Foreground="White"
                     FontSize="13"
                     FontWeight="Bold">
            <Run Text="{x:Bind Product.Price, Mode=OneWay, Converter={StaticResource PriceFormatConverter}}"/>
            <Run Text=" đ"/>
          </TextBlock>
        </Border>

        <!-- Action Buttons -->
        <Grid Grid.Row="2"
              ColumnDefinitions="*,*" 
              ColumnSpacing="6" 
              VerticalAlignment="Bottom">
              
              <!-- View Details Button -->
          <Button Grid.Column="0"
                  Content="Chi tiết"
                  Background="White"
                  Foreground="#3D5A5B"
                  BorderBrush="#3D5A5B"
                  BorderThickness="1"
                  CornerRadius="6"
                  Padding="4,6"
                  FontSize="11"
                  FontWeight="SemiBold"
                  HorizontalAlignment="Stretch"
                  Command="{x:Bind ViewDetailsCommand}"
                  CommandParameter="{x:Bind Product, Mode=OneWay}"/>
              
              <!-- Add to Cart Button -->
          <Button Grid.Column="1"
                  Content="Thêm"
                  Background="#3D5A5B"
                  Foreground="White"
                  BorderThickness="0"
                  CornerRadius="6"
                  Padding="4,6"
                  FontSize="11"
                  FontWeight="Bold"
                  HorizontalAlignment="Stretch"
                  Command="{x:Bind AddToCartCommand}"
                  CommandParameter="{x:Bind Product, Mode=OneWay}"
                  Tapped="AddToCart_Tapped"/>
        </Grid>

          </Grid>
        </Border>
    </Grid>
  </Border>
  </Grid>
</UserControl>
